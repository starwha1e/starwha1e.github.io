<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">
<meta itemprop="name" content="Projects">
<meta itemprop="description" content="Unity game demos Available at bilibili and youtube.
VR programming serious game demo Available at bilibili and youtube.
OpenGL Scene Introduction When I was a child, I usually snuck out from my apartment and take a bus to go to a mall for playing arcade games, the scene try to restore the view of the mall and the objects surrounding it. The scene consists a house with two arcades in the left, a security guard wandering in front of it, a tree next to the house, a moving car on the other side and a galaxy in the top of the scene.">
<meta itemprop="datePublished" content="2020-11-12T12:12:20+08:00" />
<meta itemprop="dateModified" content="2020-11-12T12:12:20+08:00" />
<meta itemprop="wordCount" content="2988">



<meta itemprop="keywords" content="" />
<meta property="og:title" content="Projects" />
<meta property="og:description" content="Unity game demos Available at bilibili and youtube.
VR programming serious game demo Available at bilibili and youtube.
OpenGL Scene Introduction When I was a child, I usually snuck out from my apartment and take a bus to go to a mall for playing arcade games, the scene try to restore the view of the mall and the objects surrounding it. The scene consists a house with two arcades in the left, a security guard wandering in front of it, a tree next to the house, a moving car on the other side and a galaxy in the top of the scene." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://starwha1e.github.io/projects/" />
<meta property="article:published_time" content="2020-11-12T12:12:20+08:00" />
<meta property="article:modified_time" content="2020-11-12T12:12:20+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Projects"/>
<meta name="twitter:description" content="Unity game demos Available at bilibili and youtube.
VR programming serious game demo Available at bilibili and youtube.
OpenGL Scene Introduction When I was a child, I usually snuck out from my apartment and take a bus to go to a mall for playing arcade games, the scene try to restore the view of the mall and the objects surrounding it. The scene consists a house with two arcades in the left, a security guard wandering in front of it, a tree next to the house, a moving car on the other side and a galaxy in the top of the scene."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>Projects</title>
	<link rel="stylesheet" href="https://starwha1e.github.io/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css" integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin="anonymous">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://starwha1e.github.io">Hang Li</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://starwha1e.github.io/posts/">Posts</a>
				<a href="https://starwha1e.github.io/notes/">Notes</a>
				<a href="https://starwha1e.github.io/projects">Projects</a>
				<a href="https://starwha1e.github.io/aboutme">About me</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<span class="hdr-social hide-in-mobile"><a href="https://www.linkedin.com/in/hang-li-725353140/" target="_blank" rel="noopener me" title="Linkedin"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="lihang1020@gmail.com" target="_blank" rel="noopener me" title="Email"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a><a href="https://github.com/starwha1e" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://starwha1e.github.io/posts/">Posts</a></li>
			<li><a href="https://starwha1e.github.io/notes/">Notes</a></li>
			<li><a href="https://starwha1e.github.io/projects">Projects</a></li>
			<li><a href="https://starwha1e.github.io/aboutme">About me</a></li>
		</ul>
	</div>


	<main class="site-main section-inner thin animated fadeIn faster">
		<h1>Projects</h1>
		<div class="content">
			<h1 id="unity-game-demos">Unity game demos<a href="#unity-game-demos" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>
<p>Available at <a href="https://www.bilibili.com/video/BV1gA411x7wL/">bilibili</a> and <a href="https://youtu.be/w6G9uX6GwV0">youtube</a>.</p>
<h1 id="vr-programming-serious-game-demo">VR programming serious game demo<a href="#vr-programming-serious-game-demo" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>
<p>Available at <a href="https://www.bilibili.com/video/BV17a411w7rB/">bilibili</a> and <a href="https://youtu.be/oT43W-Sd_do">youtube</a>.</p>
<h1 id="opengl-scene">OpenGL Scene<a href="#opengl-scene" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>
<h2 id="introduction">Introduction<a href="#introduction" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>When I was a child, I usually snuck out from my apartment and take a bus to go to a mall for playing arcade games, the scene try to restore the view of the mall and the objects surrounding it.
The scene consists a house with two arcades in the left, a security guard wandering in front of it, a tree next to the house, a moving car on the other side and a galaxy in the top of the scene. The scene can switch from day to night by a right-click menu and the camera and view port can be moved around with keyboard and mouse input.
<img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200520_125733.png" alt=""></p>
<h2 id="modelling">Modelling<a href="#modelling" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>There are eight models in the scene, which are: a skybox, a house, a human, a car, a tree, a galaxy and two arcades.</p>
<h3 id="skybox-stagecpp--stageh">Skybox (Stage.cpp &amp; Stage.h)<a href="#skybox-stagecpp--stageh" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>Night skybox
<img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200518_150519.png" alt="">
Day skybox
<img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200518_150742.png" alt="">
The skybox consists six textured quads that is visible from the inside. Example codes are in the following chapter of texture.
The size of the skybox is determined by the window height:
<code>stage-&gt;size((Scene::GetWindowHeight()) / tan(M_PI / 8.f));</code>
Besides, when the size of the skybox changes, the clipping plane of the camera shall changes accordingly.
<code>gluPerspective(60.0, aspect, 1.0, 2200.0);</code></p>
<h3 id="human-humancpp--humanh">Human (Human.cpp &amp; Human.h)<a href="#human-humancpp--humanh" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p><img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200504_151228.png" alt="">
The model uses hierarchical modelling:
The process is moving upward to draw the head and hat then moving downward step by step to draw other parts of the human through saving and restoring the matrix.
The orientation, the first translation, the angle of legs and arms are controlled by variables in order to enable animation.
The model consists:</p>
<ul>
<li>a hat: a cylinder (made of quads) and solid circles (made of quads)</li>
<li>a head: a solid sphere</li>
<li>a body, two arms, two hands, ten fingers and two legs: solid cubes
The model also has a walking animation, which will be illustrated in the following part.
Example code:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">// Draw the hand of the human
</span><span class="c1"></span><span class="kt">void</span> <span class="n">Human</span><span class="o">::</span><span class="n">DrawHand</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// color grey
</span><span class="c1"></span>    <span class="n">glColor3f</span><span class="p">(</span><span class="mf">0.1f</span><span class="p">,</span> <span class="mf">0.1f</span><span class="p">,</span> <span class="mf">0.1f</span><span class="p">);</span>
    <span class="c1">// Draw hand
</span><span class="c1"></span>    <span class="n">glTranslatef</span><span class="p">(</span><span class="mf">0.f</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
    <span class="n">Box</span><span class="p">(</span><span class="mf">0.7f</span><span class="p">,</span> <span class="mf">0.6f</span><span class="p">,</span> <span class="mf">0.5f</span><span class="p">);</span>
    <span class="n">glTranslatef</span><span class="p">(</span><span class="mf">0.f</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
    <span class="c1">// Draw Fingers
</span><span class="c1"></span>    <span class="c1">// thumb
</span><span class="c1"></span>    <span class="n">glPushMatrix</span><span class="p">();</span>
        <span class="n">glTranslatef</span><span class="p">(</span><span class="o">-</span><span class="mf">0.3f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">glRotatef</span><span class="p">(</span><span class="o">-</span><span class="mf">30.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">1.f</span><span class="p">);</span>
        <span class="n">glTranslatef</span><span class="p">(</span><span class="mf">0.f</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.15f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">Box</span><span class="p">(</span><span class="mf">0.1f</span><span class="p">,</span> <span class="mf">0.3f</span><span class="p">,</span> <span class="mf">0.5f</span><span class="p">);</span>
    <span class="n">glPopMatrix</span><span class="p">();</span>
    <span class="c1">// index finger
</span><span class="c1"></span>    <span class="n">glPushMatrix</span><span class="p">();</span>
        <span class="n">glTranslatef</span><span class="p">(</span><span class="o">-</span><span class="mf">0.1f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">glRotatef</span><span class="p">(</span><span class="o">-</span><span class="mf">15.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">1.f</span><span class="p">);</span>
        <span class="n">glTranslatef</span><span class="p">(</span><span class="mf">0.f</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">Box</span><span class="p">(</span><span class="mf">0.1f</span><span class="p">,</span> <span class="mf">0.6f</span><span class="p">,</span> <span class="mf">0.5f</span><span class="p">);</span>
    <span class="n">glPopMatrix</span><span class="p">();</span>

    <span class="c1">// the same paradigm for middle finger, ring finger and little finger is omitted
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>The human is resized and repositioned appropriately in the scene.</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp">    <span class="n">Human</span><span class="o">*</span> <span class="n">human</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Human</span><span class="p">();</span>
    <span class="n">human</span><span class="o">-&gt;</span><span class="n">position</span><span class="p">(</span><span class="o">-</span><span class="mi">500</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
    <span class="n">human</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">(</span><span class="mf">0.7f</span><span class="p">,</span><span class="mf">0.7f</span><span class="p">,</span><span class="mf">0.7f</span><span class="p">);</span>
    <span class="n">human</span><span class="o">-&gt;</span><span class="n">orientation</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">AddObjectToScene</span><span class="p">(</span><span class="n">human</span><span class="p">);</span>
</code></pre></div><h3 id="tree-treecpp--treeh">Tree (Tree.cpp &amp; Tree.h)<a href="#tree-treecpp--treeh" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p><img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200520_131911.png" alt="">
The tree model uses hierarchical modelling and turtle graphics.
By binding specific function with a character, the model of tree is generated with a string and a character replacement system (L system).
Example codes:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp">    <span class="c1">// tree next to the house
</span><span class="c1"></span>    <span class="n">Tree</span><span class="o">*</span> <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">();</span>
    <span class="n">objects</span><span class="p">[</span><span class="s">&#34;tree&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tree</span><span class="p">;</span>
    <span class="n">tree</span><span class="o">-&gt;</span><span class="n">SetReplaceString</span><span class="p">(</span><span class="sc">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#34;ff-[-&amp; f &lt; f &lt; + &lt;&lt; + f] + [+&gt;f--f-f]&#34;</span><span class="p">);</span>
    <span class="n">AddObjectToScene</span><span class="p">(</span><span class="n">tree</span><span class="p">);</span>
</code></pre></div><h3 id="car-carcpp--carh">Car (Car.cpp &amp; Car.h)<a href="#car-carcpp--carh" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p><img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200518_144508.png" alt=""></p>
<p>The car model also uses hierarchical modelling:
First move upwards to draw the top of the car and windows, then move downwards to draw body, lights and wheels successively.
The angle of line strip and the first translation is controlled by variables in order to enable animation.</p>
<p>The model consists:</p>
<ul>
<li>a top body: quads with material</li>
<li>a bottom body: quads with material</li>
<li>four windows: textured quads</li>
<li>two headlights object: solid cube</li>
<li>two actual headlights (Light1 and Light2)</li>
<li>four wheels: line strip and solid torus
The size of the arcade is controlled by variables <code>height, length and width</code>, the vertices are based on these variable, and the quads are based on those vertices.
The model also has a spinning wheel and moving animation, which will be illustrated in the following part.
Example codes</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">// Draw a wheel with wheel hub
</span><span class="c1"></span><span class="kt">void</span> <span class="n">Car</span><span class="o">::</span><span class="n">DrawWheel</span><span class="p">()</span> <span class="c1">// total height: 0.6 length
</span><span class="c1"></span><span class="p">{</span>
    <span class="kt">float</span> <span class="n">res</span> <span class="o">=</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">M_PI</span><span class="p">;</span> <span class="c1">// eqivalent to 0.1 * 180 degree
</span><span class="c1"></span>    <span class="kt">float</span> <span class="n">radius</span> <span class="o">=</span> <span class="n">highth</span><span class="p">;</span> <span class="c1">// the radius of the whell
</span><span class="c1"></span>    <span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">0.f</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">0.f</span><span class="p">;</span>
    <span class="n">glColor3f</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">0.9</span><span class="p">);</span>
    <span class="n">glBegin</span><span class="p">(</span><span class="n">GL_LINE_STRIP</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">float</span> <span class="n">radians</span><span class="o">=</span><span class="mf">0.f</span><span class="p">;</span> <span class="n">radians</span><span class="o">&lt;=</span><span class="mi">2</span><span class="o">*</span><span class="n">M_PI</span><span class="p">;</span> <span class="n">radians</span><span class="o">+=</span><span class="n">res</span><span class="p">)</span>
          <span class="p">{</span>
              <span class="n">glVertex3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
              <span class="n">x</span> <span class="o">=</span> <span class="n">radius</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">radians</span><span class="o">+</span><span class="n">angle</span><span class="o">/</span><span class="n">M_PI</span><span class="p">);</span>
              <span class="n">y</span> <span class="o">=</span> <span class="n">radius</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="o">+</span><span class="n">angle</span><span class="o">/</span><span class="n">M_PI</span><span class="p">);</span>
              <span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
          <span class="p">}</span>
    <span class="n">glEnd</span><span class="p">();</span>
    <span class="n">glColor3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">glutSolidTorus</span><span class="p">(</span><span class="mf">0.2f</span><span class="o">*</span><span class="n">radius</span><span class="p">,</span><span class="n">radius</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">25</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h3 id="galaxy-galaxycpp--galaxyh">Galaxy (Galaxy.cpp &amp; Galaxy.h)<a href="#galaxy-galaxycpp--galaxyh" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p><img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200518_144651.png" alt="">
The galaxy model uses hierarchical modelling:
The sun (a solid sphere)  is drew first, and then record the matrix status, rotate a certain degree, translate a certain distance and draw a planet (solid sphere), then restore the matrix status, then repeat this process for five times.
The rotate angle is controlled by a variable in order to add an orbiting animation.
Example Codes:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp">    <span class="c1">// Draw sun
</span><span class="c1"></span>    <span class="n">glColor3f</span><span class="p">(</span><span class="mf">1.f</span><span class="p">,</span> <span class="mf">1.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
    <span class="n">DrawStar</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    
    <span class="c1">// Draw planet, center to center distance: 6, radius: 1
</span><span class="c1"></span>    <span class="n">glPushMatrix</span><span class="p">();</span>
        <span class="n">glRotatef</span><span class="p">(</span><span class="mf">30.f</span> <span class="o">+</span> <span class="n">angle</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">1.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">glTranslatef</span><span class="p">(</span><span class="mf">6.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">glColor3f</span><span class="p">(</span><span class="mf">1.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">DrawStar</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">glPopMatrix</span><span class="p">();</span>
</code></pre></div><h3 id="arcade-arcadecpp--arcadeh">Arcade (Arcade.cpp &amp; Arcade.h)<a href="#arcade-arcadecpp--arcadeh" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p><img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200518_140919.png" alt="">
The arcade uses hierarchical modelling:
The top part and the screen is drew first, then move downwards where the buttons and stick are drawn (same position on z axis and y axis), then the bottom part of the arcade is drawn.</p>
<p>The model consists:</p>
<ul>
<li>a top body: textured quads</li>
<li>a bottom body: textured quads</li>
<li>a stick: textured cylinder, textured solid circle, solid sphere</li>
<li>three buttons: textured cylinder and textured solid circle</li>
<li>a display screen: quads with animated texture
The size of the arcade is controlled by variables <code>height, length and width</code>, the vertices are based on these variable, and the quads are based on those vertices.
The top, left and right face of the top part consists two quads in order to make it visible both from in side and outside.</li>
</ul>
<h3 id="house-housecpp--househ">House (House.cpp &amp; House.h)<a href="#house-housecpp--househ" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p><img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200518_145446.png" alt=""></p>
<ul>
<li>Walls and doors: textured quads
The house is built through a key function <code>DrawWall()</code>, by rotating and scaling the wall, the house is assembled.
Example codes:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp">	<span class="c1">// draw  roof
</span><span class="c1"></span>    <span class="n">glPushMatrix</span><span class="p">();</span>
        <span class="n">glTranslatef</span><span class="p">(</span><span class="mf">0.f</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mf">2.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">glRotatef</span><span class="p">(</span><span class="mf">90.f</span><span class="p">,</span> <span class="mf">1.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">glScalef</span><span class="p">(</span><span class="mf">1.f</span><span class="p">,</span><span class="mf">1.2f</span><span class="p">,</span><span class="mf">1.f</span><span class="p">);</span>
        <span class="n">DrawWall</span><span class="p">();</span>
    <span class="n">glPopMatrix</span><span class="p">();</span>
</code></pre></div><p>The model has a trigger animation, when the camera is near, the door will automatically open.</p>
<h2 id="lighting">Lighting<a href="#lighting" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="outdoor-lighting">Outdoor lighting<a href="#outdoor-lighting" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p><code>GL_LIGHT0</code> in the frame work
The light will be turn off when the night mode is selected</p>
<h3 id="indoor-lighting">Indoor lighting<a href="#indoor-lighting" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>There is a directional light inside of the house and will not be turned off when the night mode is selected.</p>
<h3 id="car-lighting">Car lighting<a href="#car-lighting" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>The car has a mixture of lighting <code>GL_LIGHT1</code> and <code>GL_LIGHT2</code>, which provide a light shapes like a cone aiming to the front of the car.
<img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200518_135457.png" alt="">
Example codes:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp">	<span class="n">GLfloat</span> <span class="n">light_ambient1</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">};</span>
    <span class="n">GLfloat</span> <span class="n">light_diffuse1</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">};</span>
    <span class="n">GLfloat</span> <span class="n">light_specular1</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">};</span>
    <span class="n">GLfloat</span> <span class="n">light_position1</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">};</span>
    <span class="n">GLfloat</span> <span class="n">spot_direction1</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">};</span>

    <span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_AMBIENT</span><span class="p">,</span> <span class="n">light_ambient1</span><span class="p">);</span>
    <span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_DIFFUSE</span><span class="p">,</span> <span class="n">light_diffuse1</span><span class="p">);</span>
    <span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_SPECULAR</span><span class="p">,</span> <span class="n">light_specular1</span><span class="p">);</span>
    <span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_POSITION</span><span class="p">,</span> <span class="n">light_position1</span><span class="p">);</span>

    <span class="n">glLightf</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_CONSTANT_ATTENUATION</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">glLightf</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_LINEAR_ATTENUATION</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">);</span>
    <span class="n">glLightf</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_QUADRATIC_ATTENUATION</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">);</span>

    <span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_SPOT_DIRECTION</span><span class="p">,</span> <span class="n">spot_direction1</span><span class="p">);</span>
    <span class="n">glLightf</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_SPOT_EXPONENT</span><span class="p">,</span> <span class="mf">20.f</span><span class="p">);</span>
    <span class="n">glLightf</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_SPOT_CUTOFF</span><span class="p">,</span> <span class="mf">20.f</span><span class="p">);</span>
</code></pre></div><h2 id="texture--material">Texture &amp; Material<a href="#texture--material" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="skybox">Skybox<a href="#skybox" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>The six faces of the skybox are bound with different textures in order to build a realistic environment.
The class <code>Stage</code> has a special function that intake a pointer that points at an array of images and apply them to the skybox. To switch from day to night, the array is in a size of 12, when the night mode is selected, the latter 6 pictures will be chosen to display as the skybox.
Example codes:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">Stage</span><span class="o">::</span><span class="n">setTextures</span><span class="p">(</span><span class="n">GLuint</span><span class="o">*</span> <span class="n">_texids</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">texids</span> <span class="o">=</span> <span class="n">_texids</span><span class="p">;</span>                       <span class="c1">// Store texture references in pointer array
</span><span class="c1"></span>    <span class="n">toTexture</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>                       <span class="c1">// Assume all loaded correctly
</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">11</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>             <span class="c1">// Check if any textures failed to load (NULL)
</span><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">texids</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">toTexture</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>   <span class="c1">// If one texture failed, do not display any
</span><span class="c1"></span><span class="p">}</span>

<span class="kt">void</span> <span class="n">Stage</span><span class="o">::</span><span class="n">Update</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span> <span class="o">&amp;</span><span class="n">deltaTime</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ReturnDay() is a function in Menu that returns the status of day or night
</span><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">ReturnDay</span><span class="p">()</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">imageStartNumber</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">imageStartNumber</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="car">Car<a href="#car" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>The top and body of the car is set with material, each face is bound with a normal. Each face can display different colour under different lighting conditions. Besides, the window of the car is bound with a glass-like texture to provide a realistic look.
Example codes:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp">    <span class="c1">// colour reflected by diffuse light, light grey
</span><span class="c1"></span>    <span class="kt">float</span> <span class="n">mat_colour</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.f</span> <span class="p">};</span>
    <span class="c1">// colour reflected by ambient light, dark grey
</span><span class="c1"></span>    <span class="kt">float</span> <span class="n">mat_ambient</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">0.5f</span><span class="p">,</span> <span class="mf">0.5f</span><span class="p">,</span> <span class="mf">0.5f</span><span class="p">,</span> <span class="mf">0.f</span> <span class="p">};</span>
    <span class="c1">// no reflection of specular colour, set the colour dark.
</span><span class="c1"></span>    <span class="kt">float</span> <span class="n">mat_spec</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span> <span class="p">};</span>

    <span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_AMBIENT</span><span class="p">,</span> <span class="n">mat_ambient</span><span class="p">);</span> <span class="c1">// set colour for ambient reflectance
</span><span class="c1"></span>    <span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_DIFFUSE</span><span class="p">,</span> <span class="n">mat_colour</span><span class="p">);</span>  <span class="c1">// set colour for diffuse reflectance
</span><span class="c1"></span>    <span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_SPECULAR</span><span class="p">,</span> <span class="n">mat_spec</span><span class="p">);</span>   <span class="c1">// set colour for specular reflectance
</span><span class="c1"></span>
	<span class="c1">// front face
</span><span class="c1"></span>    <span class="n">glBegin</span><span class="p">(</span><span class="n">GL_POLYGON</span><span class="p">);</span>
        <span class="n">glNormal3f</span><span class="p">(</span><span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">1.f</span><span class="p">);</span>
        <span class="n">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">length</span><span class="p">,</span> <span class="o">-</span><span class="n">highth</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">glVertex3f</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">length</span><span class="p">,</span> <span class="o">-</span><span class="n">highth</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">glVertex3f</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">highth</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="n">length</span><span class="p">,</span> <span class="n">highth</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">glEnd</span><span class="p">();</span>
</code></pre></div><h3 id="house">House<a href="#house" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>The walls of the house is bound with a brick image to provide a realistic look.
The walls are made of six quads, which are bound with the same image.
Example codes:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp">    <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">glEnable</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">);</span>                <span class="c1">// enable texturing
</span><span class="c1"></span>        <span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">texid</span><span class="p">);</span>    <span class="c1">// bind 2D texture to shape
</span><span class="c1"></span>    <span class="p">}</span>
    <span class="c1">// front face
</span><span class="c1"></span>    <span class="n">glBegin</span><span class="p">(</span><span class="n">GL_POLYGON</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glTexCoord2f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">glVertex3f</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mf">2.f</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glTexCoord2f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="n">glVertex3f</span><span class="p">(</span><span class="n">length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mf">2.f</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glTexCoord2f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="n">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="n">length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mf">2.f</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glTexCoord2f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="n">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="n">length</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mf">2.f</span><span class="p">);</span>
    <span class="n">glEnd</span><span class="p">();</span>
</code></pre></div><h3 id="arcade">Arcade<a href="#arcade" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>The arcade uses a specific function to intake images <code>void Arcade::SetTextures(GLuint* _texids)</code>.
The pointer points at an array of three images, the first image is the arcade screen, the second image is the material for the top part of the arcade and the third image is the material of the bottom part of the arcade.
The top part of the arcade and the buttons and stick user a reflecting image to provide a metallic material while the bottom part of the arcade uses an images like a computer host to make the model more realistic.
The body of the arcade are quads the binds with image like the wall of the house, the button and the body of the stick are cylinders and solid circle binds with image.
<img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200520_133014.png" alt="">
Example codes of button and body of the stick:</p>
<div class="highlight"><pre class="chroma"><code class="language-cs" data-lang="cs"><span class="c1">// draw a texture-bound cylinder and a solid circle at top as a lid
</span><span class="c1"></span><span class="k">void</span> <span class="n">Arcade</span><span class="p">::</span><span class="n">DrawCylinderWithTop</span><span class="p">(</span><span class="kt">float</span> <span class="n">r</span><span class="p">,</span> <span class="kt">float</span> <span class="n">h</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">res</span> <span class="p">=</span> <span class="m">0.1</span><span class="p">*</span><span class="n">M_PI</span><span class="p">;</span> <span class="c1">// a quad for every 18 degrees
</span><span class="c1"></span>    <span class="kt">float</span> <span class="n">x</span> <span class="p">=</span> <span class="n">r</span><span class="p">,</span> <span class="n">z</span> <span class="p">=</span> <span class="m">0.f</span><span class="p">;</span> <span class="c1">// the x and z position is affected by the angle
</span><span class="c1"></span>    <span class="kt">float</span> <span class="n">angle</span> <span class="p">=</span> <span class="m">2.f</span><span class="p">*</span><span class="n">M_PI</span><span class="p">;</span> <span class="c1">// rotate a full circle
</span><span class="c1"></span>    <span class="kt">float</span> <span class="n">imageProgress</span> <span class="p">=</span> <span class="m">0.f</span><span class="p">;</span> <span class="c1">// keep track of the progress in order to bind texture
</span><span class="c1"></span>    
    <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">glEnable</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">);</span>
        <span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">texids</span><span class="p">[</span><span class="m">1</span><span class="p">]);</span> <span class="c1">// bind the second image of the array to the cylinder
</span><span class="c1"></span>    <span class="p">}</span>
    
    <span class="k">do</span> <span class="c1">// for a full circle (2 * M_PI)
</span><span class="c1"></span>    <span class="p">{</span>
        <span class="n">glBegin</span><span class="p">(</span><span class="n">GL_QUADS</span><span class="p">);</span>
            <span class="c1">// first two points along the y axis
</span><span class="c1"></span>            <span class="c1">// top
</span><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glTexCoord2d</span><span class="p">(</span><span class="n">imageProgress</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
            <span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
            <span class="c1">// bottom
</span><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glTexCoord2d</span><span class="p">(</span><span class="n">imageProgress</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="m">0.f</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
            <span class="c1">// Iterate around circle
</span><span class="c1"></span>            <span class="n">angle</span> <span class="p">-=</span> <span class="n">res</span><span class="p">;</span>
            <span class="c1">// update x and z position
</span><span class="c1"></span>            <span class="n">x</span> <span class="p">=</span> <span class="n">r</span><span class="p">*</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
            <span class="n">z</span> <span class="p">=</span> <span class="n">r</span><span class="p">*</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
            <span class="c1">// other two points of the quad, counter clockwise
</span><span class="c1"></span>            <span class="c1">// bottom
</span><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glTexCoord2d</span><span class="p">(</span><span class="n">imageProgress</span> <span class="p">+</span> <span class="n">res</span> <span class="p">/</span> <span class="m">2.f</span><span class="p">*</span><span class="n">M_PI</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="m">0.f</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
            <span class="c1">// top
</span><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glTexCoord2d</span><span class="p">(</span><span class="n">imageProgress</span> <span class="p">+</span> <span class="n">res</span> <span class="p">/</span> <span class="m">2.f</span><span class="p">*</span><span class="n">M_PI</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
            <span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
            <span class="n">imageProgress</span> <span class="p">=</span> <span class="p">(</span><span class="m">2.f</span><span class="p">*</span><span class="n">M_PI</span> <span class="p">-</span> <span class="n">angle</span><span class="p">)</span> <span class="p">/</span> <span class="m">2.f</span><span class="p">*</span><span class="n">M_PI</span><span class="p">;</span>
        <span class="n">glEnd</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">angle</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glDisable</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">);</span>
    
    <span class="c1">// Top face, visible from the top
</span><span class="c1"></span>    <span class="c1">// reset the parameter
</span><span class="c1"></span>    <span class="n">x</span> <span class="p">=</span> <span class="n">r</span><span class="p">;</span>
    <span class="n">z</span> <span class="p">=</span> <span class="m">0.f</span><span class="p">;</span>
    <span class="n">angle</span> <span class="p">=</span> <span class="m">2.f</span><span class="p">*</span><span class="n">M_PI</span><span class="p">;</span>
    <span class="c1">// draw a solid circle with texture bound
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">glEnable</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">);</span>
        <span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">texids</span><span class="p">[</span><span class="m">1</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="n">glBegin</span><span class="p">(</span><span class="n">GL_POLYGON</span><span class="p">);</span>
        <span class="k">do</span>
        <span class="p">{</span>
            <span class="n">angle</span> <span class="p">-=</span> <span class="n">res</span><span class="p">;</span>
            <span class="n">x</span> <span class="p">=</span> <span class="n">r</span><span class="p">*</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
            <span class="n">z</span> <span class="p">=</span> <span class="n">r</span><span class="p">*</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glTexCoord2d</span><span class="p">(</span><span class="m">0.5f</span> <span class="p">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="m">0.5f</span> <span class="p">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">));</span>
            <span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">angle</span> <span class="p">&gt;=</span> <span class="m">0</span><span class="p">);</span>
    <span class="n">glEnd</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">toTexture</span><span class="p">)</span> <span class="n">glDisable</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">);</span>
    
<span class="p">}</span>
</code></pre></div><h2 id="animation">Animation<a href="#animation" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="car-1">Car<a href="#car-1" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<ul>
<li>
<p>The wheel is spinning to make the moving more realistic. The animation is achieved though changing the angle when drawing the line strip. The angle is controlled by the variable <code>angle</code></p>
</li>
<li>
<p>The car can also move in the scene. This is achieved through the <code>distance</code> variable in <code>DrawCar()</code>, by updating variable <code>distance</code> in accordance to time, the car will translate same distance in the same period of time.
Example codes:</p>
</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">Car</span><span class="o">::</span><span class="n">Update</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span> <span class="o">&amp;</span><span class="n">dT</span><span class="p">)</span>
<span class="p">{</span>
	<span class="c1">// update time
</span><span class="c1"></span>	<span class="n">aT</span> <span class="o">=</span> <span class="n">fmod</span><span class="p">(</span><span class="n">aT</span> <span class="o">+</span> <span class="n">dT</span><span class="p">,</span> <span class="n">animationTime</span><span class="p">);</span>
	<span class="c1">// total animation stages of 36
</span><span class="c1"></span>	<span class="kt">float</span> <span class="n">aS</span> <span class="o">=</span> <span class="mf">36.f</span><span class="o">*</span><span class="n">aT</span> <span class="o">/</span> <span class="n">animationTime</span><span class="p">;</span>
	<span class="c1">// use angle to display the spin of the wheel
</span><span class="c1"></span>	<span class="n">angle</span> <span class="o">=</span> <span class="mf">10.f</span> <span class="o">*</span> <span class="n">aS</span><span class="p">;</span>
	<span class="c1">// use distance to control the movement of the car in the scene
</span><span class="c1"></span>	<span class="n">distance</span> <span class="o">=</span> <span class="n">aS</span> <span class="o">*</span> <span class="mf">4.f</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">Car</span><span class="o">::</span><span class="n">DrawWheel</span><span class="p">()</span> <span class="c1">// total height: 0.6 length
</span><span class="c1"></span><span class="p">{</span>
	<span class="kt">float</span> <span class="n">res</span> <span class="o">=</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">M_PI</span><span class="p">;</span> <span class="c1">// eqivalent to 0.1 * 180 degree
</span><span class="c1"></span>	<span class="kt">float</span> <span class="n">radius</span> <span class="o">=</span> <span class="n">highth</span><span class="p">;</span> <span class="c1">// the radius of the whell
</span><span class="c1"></span>	<span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">0.f</span><span class="p">;</span>
	<span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">0.f</span><span class="p">;</span>
	<span class="n">glColor3f</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">0.9</span><span class="p">);</span>
	<span class="n">glBegin</span><span class="p">(</span><span class="n">GL_LINE_STRIP</span><span class="p">);</span>
    	<span class="k">for</span><span class="p">(</span><span class="kt">float</span> <span class="n">radians</span><span class="o">=</span><span class="mf">0.f</span><span class="p">;</span> <span class="n">radians</span><span class="o">&lt;=</span><span class="mi">2</span><span class="o">*</span><span class="n">M_PI</span><span class="p">;</span> <span class="n">radians</span><span class="o">+=</span><span class="n">res</span><span class="p">)</span>
    	  <span class="p">{</span>
        	  <span class="n">glVertex3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
        	  <span class="n">x</span> <span class="o">=</span> <span class="n">radius</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">radians</span><span class="o">+</span><span class="n">angle</span><span class="o">/</span><span class="n">M_PI</span><span class="p">);</span>
        	  <span class="n">y</span> <span class="o">=</span> <span class="n">radius</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="o">+</span><span class="n">angle</span><span class="o">/</span><span class="n">M_PI</span><span class="p">);</span>
        	  <span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    	  <span class="p">}</span>
	<span class="n">glEnd</span><span class="p">();</span>
	<span class="n">glColor3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
	<span class="n">glutSolidTorus</span><span class="p">(</span><span class="mf">0.2f</span><span class="o">*</span><span class="n">radius</span><span class="p">,</span><span class="n">radius</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">25</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h3 id="human">Human<a href="#human" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>The animation of walking consists the animation of legs and arms, as well as a movement in the scene.
The legs and arms can swing by updating the angle when drawing them, and the movement in the scene is achieved by the <code>distance</code> variable to translate the whole model in the scene. In addition, there are fourteen stages of the animation in order to set a repeatedly swing animation of arms and legs.
Example codes:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">Human</span><span class="o">::</span><span class="n">Update</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span> <span class="o">&amp;</span><span class="n">dT</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">aT</span> <span class="o">=</span> <span class="n">fmod</span><span class="p">(</span><span class="n">aT</span> <span class="o">+</span> <span class="n">dT</span><span class="p">,</span> <span class="n">animationTime</span><span class="p">);</span>          <span class="c1">// update time in animation cycle
</span><span class="c1"></span>    <span class="kt">float</span> <span class="n">aS</span> <span class="o">=</span> <span class="mf">14.f</span><span class="o">*</span><span class="n">aT</span> <span class="o">/</span> <span class="n">animationTime</span><span class="p">;</span>         <span class="c1">// 14 animation stages in total
</span><span class="c1"></span>
    <span class="c1">// wandering back and forward
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">aS</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="mf">3.f</span> <span class="o">*</span> <span class="n">aS</span><span class="p">;</span>
        <span class="n">turn</span> <span class="o">=</span> <span class="mf">0.f</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="mf">3.f</span> <span class="o">*</span> <span class="p">(</span><span class="mf">14.f</span> <span class="o">-</span> <span class="n">aS</span><span class="p">);</span>
        <span class="n">turn</span> <span class="o">=</span> <span class="mf">180.f</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="c1">// the animation cycle (the movement of arms and legs)
</span><span class="c1"></span>    <span class="c1">// 1st or final stage
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">aS</span> <span class="o">&lt;</span> <span class="mf">1.f</span> <span class="o">||</span> <span class="n">aS</span> <span class="o">&gt;</span> <span class="mf">14.f</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="o">-</span><span class="mf">30.f</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 2nd or 13th stage
</span><span class="c1"></span>    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">aS</span> <span class="o">&lt;</span> <span class="mf">2.f</span> <span class="o">||</span> <span class="n">aS</span> <span class="o">&gt;</span> <span class="mf">13.f</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="o">-</span><span class="mf">20.f</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 3rd or 12th stage
</span><span class="c1"></span>    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">aS</span> <span class="o">&lt;</span> <span class="mf">3.f</span> <span class="o">||</span> <span class="n">aS</span> <span class="o">&gt;</span> <span class="mf">12.f</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="o">-</span><span class="mf">10.f</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 4rd or 11th stage
</span><span class="c1"></span>    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">aS</span> <span class="o">&lt;</span> <span class="mf">4.f</span> <span class="o">||</span> <span class="n">aS</span> <span class="o">&gt;</span> <span class="mf">11.f</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="mf">0.f</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 5rd or 10th stage
</span><span class="c1"></span>    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">aS</span> <span class="o">&lt;</span> <span class="mf">5.f</span> <span class="o">||</span> <span class="n">aS</span> <span class="o">&gt;</span> <span class="mf">10.f</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="mf">10.f</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 6rd or 9th stage
</span><span class="c1"></span>    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">aS</span> <span class="o">&lt;</span> <span class="mf">6.f</span> <span class="o">||</span> <span class="n">aS</span> <span class="o">&gt;</span> <span class="mf">9.f</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="mf">20.f</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 7th and 8th stage
</span><span class="c1"></span>    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="mf">30.f</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="galaxy">Galaxy<a href="#galaxy" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>The animation of six stars orbiting around a sun is achieved by updating the angle when drawing the solid sphere.
Example codes:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp">    <span class="c1">// Draw planet, center to center distance: 6, radius: 1
</span><span class="c1"></span>    <span class="n">glPushMatrix</span><span class="p">();</span>
        <span class="n">glRotatef</span><span class="p">(</span><span class="mf">30.f</span> <span class="o">+</span> <span class="n">angle</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">1.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">glTranslatef</span><span class="p">(</span><span class="mf">6.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">glColor3f</span><span class="p">(</span><span class="mf">1.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">,</span> <span class="mf">0.f</span><span class="p">);</span>
        <span class="n">DrawStar</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">glPopMatrix</span><span class="p">();</span>
</code></pre></div><h3 id="house-1">House<a href="#house-1" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>Trigger animation, when the camera is close enough to the front gate, the gate will automatically open. Achieved through a Boolean variable <code>doorOpen</code> and by detecting static variable <code>eyePosition</code> in class <code>MyCamera</code>.
Example codes:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">House</span><span class="o">::</span><span class="n">Update</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span> <span class="o">&amp;</span><span class="n">dT</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">MyCamera</span><span class="o">::</span><span class="n">eyePosition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">250</span> <span class="o">&amp;&amp;</span> <span class="n">MyCamera</span><span class="o">::</span><span class="n">eyePosition</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">doorOpen</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">doorOpen</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">DrawHouse</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><h2 id="interaction">Interaction<a href="#interaction" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="camera">Camera<a href="#camera" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>The camera class <code>MyClass</code> used in the scene is inherited from the class <code>Camera</code> in the framework. The key detection and mouse detection function (<code>Update</code> and <code>HandleKey</code>)are changed in order to provide more flexibility when viewing the scene.</p>
<ol>
<li>Movement:
Use WASD to move around the scene.
Use Q to move upwards, and use E to move downwards
Use R to reset the camera to its default position and the place it looks at</li>
<li>Look at:
Drag the mouse to look around the scene.
The variable <code>eyePostion</code> is set to be public static in order to enable other class obtain the current position of the camera.
Example codes:</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">MyCamera</span><span class="o">::</span><span class="n">Update</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span><span class="o">&amp;</span> <span class="n">deltaTime</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">speed</span> <span class="o">=</span> <span class="mf">4.0f</span><span class="p">;</span>
    <span class="c1">// move the camera rightwards
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">aKey</span><span class="p">)</span>
        <span class="n">sub</span><span class="p">(</span><span class="n">eyePosition</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">speed</span><span class="p">);</span>
    <span class="c1">// move the camera leftwards
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">dKey</span><span class="p">)</span>
        <span class="n">add</span><span class="p">(</span><span class="n">eyePosition</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">speed</span><span class="p">);</span>
    <span class="c1">// move the camera forwards
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">wKey</span><span class="p">)</span>
        <span class="n">add</span><span class="p">(</span><span class="n">eyePosition</span><span class="p">,</span> <span class="n">forward</span><span class="p">,</span> <span class="n">speed</span><span class="p">);</span>
    <span class="c1">// move the camera backwards
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">sKey</span><span class="p">)</span>
        <span class="n">sub</span><span class="p">(</span><span class="n">eyePosition</span><span class="p">,</span> <span class="n">forward</span><span class="p">,</span> <span class="n">speed</span><span class="p">);</span>
    <span class="c1">// move the camera upwards
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">qKey</span><span class="p">)</span>
        <span class="n">add</span><span class="p">(</span><span class="n">eyePosition</span><span class="p">,</span> <span class="n">up</span><span class="p">,</span> <span class="n">speed</span><span class="p">);</span>
    <span class="c1">// move the camera downwards
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">eKey</span><span class="p">)</span>
        <span class="n">sub</span><span class="p">(</span><span class="n">eyePosition</span><span class="p">,</span> <span class="n">up</span><span class="p">,</span> <span class="n">speed</span><span class="p">);</span>
    <span class="c1">// reset the camera
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">rKey</span><span class="p">)</span>
        <span class="n">Reset</span><span class="p">();</span>

    <span class="n">SetupCamera</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><h3 id="right-click-menu">Right click menu<a href="#right-click-menu" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p><img src="https://raw.githubusercontent.com/invictuslh/Image_Hosting/master/uPic/20200520_133134.png" alt="">
The program establishes a right click menu to provide the ability to change the scene from day to night, the light of the scene will be turn off and the skybox will be changed to the according one.
Example code:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">processMenuEvents</span><span class="p">(</span><span class="kt">int</span> <span class="n">option</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">option</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">case</span> <span class="nl">DAY</span><span class="p">:</span>
            <span class="n">day</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="n">glEnable</span><span class="p">(</span><span class="n">GL_LIGHT0</span><span class="p">);</span>
            <span class="n">glEnable</span><span class="p">(</span><span class="n">GL_LIGHT3</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="nl">NIGHT</span><span class="p">:</span>
            <span class="n">day</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
            <span class="c1">//glDisable(GL_LIGHT3);
</span><span class="c1"></span>            <span class="n">glDisable</span><span class="p">(</span><span class="n">GL_LIGHT0</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">glutPostRedisplay</span><span class="p">();</span>
<span class="p">}</span>


<span class="kt">void</span> <span class="nf">createGLUTMenus</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">menu</span><span class="p">;</span>
    <span class="c1">// establish the menu and use processMenuEvents to cope with menu events
</span><span class="c1"></span>    <span class="n">menu</span> <span class="o">=</span> <span class="n">glutCreateMenu</span><span class="p">(</span><span class="n">processMenuEvents</span><span class="p">);</span>
    <span class="c1">// add entrys to the menu
</span><span class="c1"></span>    <span class="n">glutAddMenuEntry</span><span class="p">(</span><span class="s">&#34;DAY&#34;</span><span class="p">,</span> <span class="n">DAY</span><span class="p">);</span>
    <span class="n">glutAddMenuEntry</span><span class="p">(</span><span class="s">&#34;NIGHT&#34;</span><span class="p">,</span> <span class="n">NIGHT</span><span class="p">);</span>

<span class="c1">//    glutAddMenuEntry(&#34;Move&#34;, MOVE);
</span><span class="c1"></span>
    <span class="c1">// connect the menu to right mouse button
</span><span class="c1"></span>    <span class="n">glutAttachMenu</span><span class="p">(</span><span class="n">GLUT_RIGHT_BUTTON</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><h3 id="trigger-animation">Trigger animation<a href="#trigger-animation" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>If the camera is close enough to the gate of the house, the door of the house will open automatically.
Example codes:</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">House</span><span class="o">::</span><span class="n">Update</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span> <span class="o">&amp;</span><span class="n">dT</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">MyCamera</span><span class="o">::</span><span class="n">eyePosition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">250</span> <span class="o">&amp;&amp;</span> <span class="n">MyCamera</span><span class="o">::</span><span class="n">eyePosition</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">doorOpen</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">doorOpen</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">DrawHouse</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><h2 id="conclusion--future-works">Conclusion &amp; Future works<a href="#conclusion--future-works" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>In conclusion, this project establishes an urban scene with a house, a car, a human and other decorating objects. Some of the models could be more complicated such as the house and the car in order to make the scene more realistic. The model of arcade is well-designed and bound with appropriate textures, it is the most satisfactory model in the scene in my opinion. The scene also provides some interactiveness, the user can view the scene from every perspective and the trigger to open the door of the house makes the scene less rigid.
As future work, more complex models will be added to make the scene more realistic and more texture will be used in order to achieve this goal.</p>

		</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2021 <a href="https://starwha1e.github.io">Hang Li</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://starwha1e.github.io/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>



	<script src="https://starwha1e.github.io/js/bundle.min.4a9a0ac3d2217822c7865b4161e6c2a71de1d70492264337755427898dd718f6.js" integrity="sha256-SpoKw9IheCLHhltBYebCpx3h1wSSJkM3dVQniY3XGPY=" crossorigin="anonymous"></script>
	

</body>

</html>
